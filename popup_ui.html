<!DOCTYPE html>
<html lang="en">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Dynamic Battery Bar (Fluid)</title>
    <style>
        :root {
            --bar-color: #000000;
            --liquid-color: %liquid_color;
            --battery-level-decimal: %battery_level_decimal;
            --ease-out-back: cubic-bezier(0.34, 1.56, 0.64, 1);
            --ease-in-back: cubic-bezier(0.6, -0.28, 0.74, 0.05);
        }
        body {
            margin: 0;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            background-color: transparent;
            overflow: hidden;
            -webkit-font-smoothing: antialiased;
        }
        .custom-bar {
            position: absolute;
            top: 10px;
            left: 50%;
            transform: translateX(-50%);
            background-color: var(--bar-color);
            color: #fff;
            animation: notch-enter 0.6s var(--ease-out-back) forwards;
        }
        .custom-bar.exit {
            animation: notch-exit 0.6s var(--ease-in-back) forwards;
        }
        .bar-content {
            box-sizing: border-box;
            padding: 0 30px;
            height: 100%;
            opacity: 0;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            gap: 0; 
            animation: content-fade-in 0.4s ease-out 0.4s forwards;
        }
        .custom-bar.exit .bar-content {
            animation: content-fade-out 0.2s ease-out forwards;
        }
        .top-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 100%;
        }
        .bottom-row {
            width: 100%;
            text-align: center;
            position: relative;
            top: -9px;
        }
        .percentage { font-size: 48px; font-weight: 700; line-height: 1; margin: 0; }
        .subtitle { font-size: 16px; font-weight: 400; color: rgba(255, 255, 255, 0.7); margin: 0; }
        .new-battery-svg {
            width: 100px; 
            height: 100px;
        }
        .battery-outline {
            stroke: white;
            stroke-width: 3.5;
            fill: none;
            stroke-linecap: round;
            stroke-linejoin: round;
        }
        .battery-liquid-base {
            fill: var(--liquid-color);
        }
        @keyframes notch-enter {
            from { width: 44px; height: 44px; border-radius: 44px; opacity: 0; }
            to { width: 95vw; height: 125px; border-radius: 36px; opacity: 1; }
        }
        @keyframes notch-exit {
            from { width: 95vw; height: 125px; border-radius: 36px; opacity: 1; }
            to { width: 44px; height: 44px; border-radius: 44px; opacity: 0; }
        }
        @keyframes content-fade-in { to { opacity: 1; } }
        @keyframes content-fade-out { to { opacity: 0; } }
    </style>
</head>
<body>
    <div id="island-bar" class="custom-bar">
        <div class="bar-content">
            <div class="top-row">
                <div class="battery-icon-container">
                    <svg class="new-battery-svg" viewBox="0 0 50 30">
                        <defs>
                            <clipPath id="liquid-mask">
                                <rect x="4" y="6" width="38" height="18" rx="2"/>
                            </clipPath>
                        </defs>
                        <g clip-path="url(#liquid-mask)">
                            <g style="transform: scaleX(var(--battery-level-decimal)); transform-origin: left center;">
                                <rect class="battery-liquid-base" x="4" y="6" width="38" height="18" />
                            </g>
                        </g>
                        <path class="battery-outline" d="M2,8 C2,5.79 3.79,4 6,4 L40,4 C42.21,4 44,5.79 44,8 L44,22 C44,24.21 42.21,26 40,26 L6,26 C3.79,26 2,24.21 2,22 Z M44,10 L48,10 L48,20 L44,20"/>
                    </svg>
                </div>
                <p class="percentage">%percentage_text</p>
            </div>
            <div class="bottom-row">
                <p class="subtitle">%subtitle_text</p>
            </div>
        </div>
    </div>

    <script>
        const bar = document.getElementById('island-bar');
        setTimeout(() => {
            bar.classList.add('exit');
        }, 3000);
    </script>
</body>
</html>